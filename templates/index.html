<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">
    <title>Qianxu Zeng - Explore</title>
    
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap theme -->
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <!-- Custom styles for this project -->
  </head>
  
  <body role="document">
    
    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container" >
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    
    <div class="container theme-showcase" role="main">
      
      <!-- Main jumbotron for a primary marketing message or call to action -->
      <div class="jumbotron">
	<h2>Data Pipeline Project Exploratory Analysis Byte - Bird</h2>
        <p>Is the data complete? No, some data is missing. For example, the breed of some birds are missing.</p>
        <p>Is the data coherent? Some of them are coherent. There are some duplications. For example, "Intaken Date" includes the year and month, there is no need to have extra columns to indicate the year and month. </p>
        <p>Is the data correct? I explored "latitude", "IntakenYear", "IntakenMonth" and "ZipFound". Existing data is in the right range. Some data is missing.</p>
      </div>
      
      <div class="page-header">
	
      </div> <!-- /page-header -->
    </div> <!-- /container -->
    
    <div class="button-toolbar" role="toolbar" id="headers" name="headers">
      
      <button type="button" class = "btn-space btn btn-info" id="AnimalID" onclick="updateTable('AnimalID')">AnimalID</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Animal Type" onclick="updateTable('Animal Type')">AnimalType</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Intake Date" onclick="updateTable('Intake Date')">IntakeDate</button>
      
      <button type="button" class = "btn-space btn btn-info" id="IntakeYear" onclick="updateTable('IntakeYear')">IntakeYear</button>
      
      <button type="button" class = "btn-space btn btn-info" id="IntakeMonth" onclick="updateTable('IntakeMonth')">IntakeMonth</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Breed" onclick="updateTable('Breed')">Breed</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Sex" onclick="updateTable('Sex')">Sex</button>
      
      <button type="button" class = "btn-space btn btn-info" id="SpayNeuter" onclick="updateTable('SpayNeuter')">SpayNeuter</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Size" onclick="updateTable('Size')">Size</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Color" onclick="updateTable('Color')">Color</button>
      
      <button type="button" class = "btn-space btn btn-info" id="IntakeType" onclick="updateTable('IntakeType')">IntakeType</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Outcome Subtype" onclick="updateTable('Outcome Subtype')">OutcomeSubtype</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Zip Where Found" onclick="updateTable('Zip Where Found')">ZipFound</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Latitude" onclick="updateTable('Latitude')">Latitude</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Longitude" onclick="updateTable('Longitude')">Longitude</button>
      
      <button type="button" class = "btn-space btn btn-info" id="Zip Where Placed" onclick="updateTable('Zip Where Placed')">ZipPlaced</button>
      
      <button type="button" class = "btn-space btn btn-info" id="OutcomeDate" onclick="updateTable('OutcomeDate')">OutcomeDate</button>
      
      <button type="button" class = "btn-space btn btn-info" id="OutcomeYear" onclick="updateTable('OutcomeYear')">OutcomeYear</button>
      
      <button type="button" class = "btn-space btn btn-info" id="OutcomeMonth" onclick="updateTable('OutcomeMonth')">OutcomeMonth</button>
      
      
    </div>
    
    <div id="animals"><table id="data" class="table table-striped table-hover">
	<thead class ="thead-inverse">
	  <tr id="cols">
	  </tr>
	</thead>
	<tbody id="rows"> 
	</tbody>
    </table></div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
	function updateTable(str) {
		console.log("in updateTable");
		console.log(str);

	    // error checking: ignore buttons that don't have a title!
		if (str == "") {
			return;
		}

	    // find the actual button in this document's HTML
		button = document.getElementById(str);
		// for debugging, write its name to the console
		console.log(button.className);
		// check if it is disabled (btn-info)
		if (button.className.includes("btn-info")) {
			// and enable it (btn-primary)
			button.className = "btn btn-space btn-primary";
		} else {
			// otherwise disable it (btn-info)
			button.className = "btn btn-space btn-info";
		}

		// now get all the buttons
		buttons = document.getElementById("headers").children;
		// and collect their names in cols
		cols = [];
		// loop through them
		for (button in buttons) {
			// grab the id (the name we need is there)
			id = buttons[button].id;
			// make sure it isn't null
			if (buttons[button].id != null) {
				// and that the button is selected 
				var isPrimary = buttons[button].className.includes("btn-primary");
				if (isPrimary && (cols.indexOf(id) == -1)) {
					// if so, add it to our array
					cols.push(id);
				}
			}
		}
					
		$.ajax({
			url: '/_update_table',
			dataType: 'json',
			contentType: 'application/json',
			data: JSON.stringify({'cols' : cols}),
			type: 'POST',
			success: function (res, status) {
				console.log("successrunning");
			
				console.log(res["content"]);
				console.log(res["headers"]);
				var cols = res["headers"];
				var rows = res["content"];

				// get the table, columns and rows
				table = document.getElementById("data");
				headers = document.getElementById("cols");
				body = document.getElementById("rows");

				// delete current contents
				headers.innerHTML='';
				body.innerHTML = '';

				// and put the new information in the table
				for (col in cols) {
					cell = document.createElement("th");
					cell.innerHTML = cols[col];
					headers.appendChild(cell);
				}
				for (row in rows) {
					tr = document.createElement("tr");
					for (item in rows[row]) {
						td = document.createElement("td");
						td.innerHTML = rows[row][item];
						tr.appendChild(td);
					}
					body.appendChild(tr);
				}
			},
			error: function(res, status) {
				// On Error
				alert('error');
			}
		});
	}
				
			   
				   
</script>
	<img src="/static/latitude.png" height="400" padding="20">
	<img src="/static/zip.png" height="400" padding="20">
	<img src="/static/years.png" height="400" padding="20">
	<img src="/static/month.png" height="400" padding="20">

</body>
</html>